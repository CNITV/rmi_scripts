#!/usr/bin/env python3
#
# Removes participations into CMS
#
# Made by Tudor Roman, public domain
#
# This script expects as its first argument a table generated by add_users.
# The second argument is the id of the contest.
#

import csv
import sys
from subprocess import call

if len(sys.argv) != 3:
    print("Usage: add_participations <csv_file> <contest_id>")
    sys.exit(1)

contest_id = sys.argv[2]
with open(sys.argv[1]) as file:
    reader = csv.DictReader(file, delimiter=',')
    for row in reader:
        call(['cmsRemoveParticipation', '-c', contest_id, row['username']])
